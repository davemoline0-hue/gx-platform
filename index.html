<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-X Platform - Connect, Share, Unite</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3842061098365858" crossorigin="anonymous"></script>
    <meta name="description" content="G-X Platform - Connect with friends, share memories, and build meaningful relationships in our united community">
    <meta name="keywords" content="social platform, community, chat, memories, sharing, connect, friends">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --dark: #2d3748;
            --light: #f8fafc;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gold: #fbbf24;
            --silver: #9ca3af;
            --blue: #3b82f6;
            --sidebar: #1f2937;
            --card: #ffffff;
            --text: #1f2937;
            --border: #e5e7eb;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            color: var(--text);
        }

        /* Auth Styles */
        .auth-container {
            max-width: 500px;
            margin: 20px auto;
            background: var(--card);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid var(--border);
        }

        @media (max-width: 768px) {
            .auth-container {
                margin: 10px;
                border-radius: 12px;
            }
        }

        .auth-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .form-container {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text);
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: var(--light);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .btn {
            padding: 14px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .auth-toggle {
            text-align: center;
            margin-top: 24px;
            color: #6b7280;
            font-size: 14px;
        }

        .auth-toggle a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .auth-toggle a:hover {
            text-decoration: underline;
        }

        .error-message {
            background: #fef2f2;
            color: var(--danger);
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            text-align: center;
            border: 1px solid #fecaca;
            display: none;
        }

        .success-message {
            background: #f0fdf4;
            color: #065f46;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            text-align: center;
            border: 1px solid #bbf7d0;
            display: none;
        }

        .forgot-password {
            text-align: center;
            margin: 16px 0;
        }

        .forgot-password a {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
        }

        .forgot-password a:hover {
            text-decoration: underline;
        }

        /* Main App Styles */
        #main-app {
            display: none;
        }

        .navbar {
            background: var(--card);
            padding: 0 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            border-bottom: 1px solid var(--border);
        }

        .nav-brand {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text);
            padding: 10px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            font-weight: 500;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-link:hover {
            background: var(--light);
            color: var(--primary);
        }

        .nav-link.active {
            background: var(--primary);
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-stats {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .stat-item {
            background: var(--light);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
            border: 1px solid var(--border);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 14px;
            position: relative;
            cursor: pointer;
        }

        /* Container Layout */
        .container {
            max-width: 1400px;
            margin: 1rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 1.5rem;
        }

        /* Sidebar */
        .sidebar {
            background: var(--card);
            border-radius: 12px;
            padding: 1.25rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            height: fit-content;
            border: 1px solid var(--border);
        }

        .sidebar-section {
            margin-bottom: 1.5rem;
        }

        .sidebar-section h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 1rem;
        }

        /* Main Content */
        .main-content {
            min-height: calc(100vh - 120px);
        }

        .section {
            display: none;
        }

        .active-section {
            display: block;
        }

        /* Post Cards */
        .post-card {
            background: var(--card);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .post-user-info h4 {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .post-user-info small {
            color: #6b7280;
            font-size: 12px;
        }

        .post-content {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        /* Chat System */
        .chat-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 1rem;
            height: 500px;
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
        }

        .chat-list {
            background: var(--light);
            padding: 1rem;
            overflow-y: auto;
            border-right: 1px solid var(--border);
        }

        .chat-window {
            display: flex;
            flex-direction: column;
            padding: 1rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .message {
            padding: 10px 14px;
            border-radius: 16px;
            max-width: 85%;
            word-wrap: break-word;
        }

        .message.sent {
            background: var(--primary);
            color: white;
            margin-left: auto;
        }

        .message.received {
            background: var(--light);
            color: var(--text);
            margin-right: auto;
        }

        .chat-input-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 20px;
            background: var(--light);
        }

        .send-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: var(--card);
            padding: 2rem;
            border-radius: 16px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            border: 1px solid var(--border);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-weight: 700;
            color: var(--text);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            padding: 4px;
            border-radius: 6px;
        }

        .close-btn:hover {
            color: var(--danger);
            background: var(--light);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: none;
            text-align: center;
            margin: 10px 0;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Profile Styles */
        .profile-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary);
            margin: 0 auto 1rem;
            display: block;
        }

        .creator-info {
            text-align: center;
            margin-bottom: 2rem;
        }

        .creator-info h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .about-content {
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .about-content h4 {
            color: var(--primary);
            margin: 1.5rem 0 0.75rem 0;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Login/Signup Form -->
    <div id="auth-app" class="auth-container">
        <div class="auth-header">
            <h1 id="auth-title">Welcome to G-X</h1>
            <p>Connect, share, and build relationships</p>
        </div>
        
        <div class="form-container">
            <div id="auth-error" class="error-message"></div>
            <div id="auth-success" class="success-message"></div>
            
            <!-- Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email Address</label>
                    <input type="email" id="login-email" required placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required placeholder="Enter your password">
                </div>
                
                <button type="submit" class="btn">Sign In</button>
            </form>

            <div class="forgot-password">
                <a onclick="showForgotPassword()">Forgot your password?</a>
            </div>
            
            <div class="auth-toggle">
                <span id="auth-toggle-text">Don't have an account? <a onclick="toggleAuthMode()">Sign up here</a></span>
            </div>

            <!-- Signup Form -->
            <form id="signup-form" style="display: none;">
                <div class="form-group">
                    <label for="signup-firstname">First Name</label>
                    <input type="text" id="signup-firstname" required placeholder="Enter your first name">
                </div>

                <div class="form-group">
                    <label for="signup-lastname">Last Name</label>
                    <input type="text" id="signup-lastname" required placeholder="Enter your last name">
                </div>

                <div class="form-group">
                    <label for="signup-email">Email Address</label>
                    <input type="email" id="signup-email" required placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" required placeholder="Create a password">
                </div>

                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" required placeholder="Confirm your password">
                </div>

                <div class="form-group" style="display: flex; align-items: center; gap: 10px; margin: 20px 0;">
                    <input type="checkbox" id="agree-terms" required style="width: auto;">
                    <label for="agree-terms" style="margin-bottom: 0;">I agree to the Terms and Conditions</label>
                </div>
                
                <button type="submit" class="btn">Create Account</button>

                <div class="auth-toggle" style="margin-top: 20px;">
                    <span>Already have an account? <a onclick="toggleAuthMode()">Login here</a></span>
                </div>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">G-X Platform</div>
            <div class="nav-links">
                <a class="nav-link active" onclick="showSection('home')">Home</a>
                <a class="nav-link" onclick="showSection('chat')">Chat</a>
                <a class="nav-link" onclick="showSection('messages')">Messages</a>
                <a class="nav-link" onclick="showNotification()">Notifications</a>
            </div>
            <div class="user-menu">
                <div class="user-stats">
                    <div class="stat-item followers">
                        Followers: <span id="user-followers">0</span>
                    </div>
                </div>
                <div class="user-avatar" onclick="showSettings()">
                    <span id="avatar-text">U</span>
                </div>
            </div>
        </nav>

        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>Quick Actions</h3>
                    <button class="btn" onclick="showCreatePost()" style="width: 100%; margin-bottom: 1rem;">
                        Create Post
                    </button>
                    <button class="btn" onclick="showFindFriends()" style="width: 100%;">
                        Find Friends
                    </button>
                </div>

                <div class="sidebar-section">
                    <h3>Platform</h3>
                    <a class="nav-link" onclick="showAbout()" style="display: block; margin-bottom: 0.5rem;">
                        About Us
                    </a>
                    <a class="nav-link" onclick="showContact()" style="display: block; margin-bottom: 0.5rem;">
                        Contact Us
                    </a>
                    <a class="nav-link" id="admin-link" style="display: none;" onclick="showSection('admin')">
                        Admin Dashboard
                    </a>
                    <a class="nav-link" onclick="logout()" style="display: block; color: var(--danger);">
                        Logout
                    </a>
                </div>

                <div class="sidebar-section">
                    <h3>Online Friends</h3>
                    <div id="online-users-list">
                        <div class="user-item" style="display: flex; align-items: center; gap: 10px; padding: 8px; border-radius: 8px;">
                            <div class="user-avatar" style="background: var(--success);">JD</div>
                            <span>John Doe</span>
                        </div>
                        <div class="user-item" style="display: flex; align-items: center; gap: 10px; padding: 8px; border-radius: 8px;">
                            <div class="user-avatar" style="background: var(--warning);">JS</div>
                            <span>Jane Smith</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Home Section -->
                <section id="home-section" class="section active-section">
                    <div class="post-card">
                        <div class="post-header">
                            <div class="user-avatar" id="current-user-avatar">
                                <span id="avatar-text">U</span>
                            </div>
                            <div class="post-user-info">
                                <h4 id="current-user-name">Welcome to G-X!</h4>
                                <small>Share your thoughts with the community</small>
                            </div>
                        </div>
                        <div class="post-content">
                            <p>This is your space to connect with friends, share memories, and build meaningful relationships. Start by creating your first post!</p>
                        </div>
                    </div>

                    <div id="posts-container">
                        <!-- Posts will be loaded here -->
                    </div>
                </section>

                <!-- Chat Section -->
                <section id="chat-section" class="section">
                    <h2 style="margin-bottom: 1.5rem;">Chat with Friends</h2>
                    <div class="chat-container">
                        <div class="chat-list" id="chat-list">
                            <div class="user-item" style="display: flex; align-items: center; gap: 10px; padding: 12px; border-radius: 8px; background: var(--primary); color: white;">
                                <div class="user-avatar" style="background: var(--success);">JD</div>
                                <div>
                                    <div style="font-weight: 600;">John Doe</div>
                                    <small>Online</small>
                                </div>
                            </div>
                            <div class="user-item" style="display: flex; align-items: center; gap: 10px; padding: 12px; border-radius: 8px;">
                                <div class="user-avatar" style="background: var(--warning);">JS</div>
                                <div>
                                    <div style="font-weight: 600;">Jane Smith</div>
                                    <small>Last seen 2h ago</small>
                                </div>
                            </div>
                        </div>
                        <div class="chat-window">
                            <div class="chat-messages" id="chat-messages">
                                <div class="message received">
                                    Hey there! Welcome to G-X Platform!
                                </div>
                                <div class="message sent">
                                    Thanks! Excited to be here 😊
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="chat-input" placeholder="Type a message..." class="chat-input">
                                <button class="send-btn" onclick="sendMessage()">➤</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Messages Section -->
                <section id="messages-section" class="section">
                    <h2 style="margin-bottom: 1.5rem;">New Messages</h2>
                    <div id="new-messages-container">
                        <div class="post-card">
                            <div class="post-header">
                                <div class="user-avatar" style="background: var(--success);">AL</div>
                                <div class="post-user-info">
                                    <h4>Alex Johnson</h4>
                                    <small>New connection • 5 minutes ago</small>
                                </div>
                            </div>
                            <div class="post-content">
                                <p>Hi! I saw your profile and would love to connect with you!</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Admin Section -->
                <section id="admin-section" class="section">
                    <h2>Admin Dashboard</h2>
                    <div class="post-card">
                        <h3>Welcome, Admin!</h3>
                        <p>You have access to manage all users and platform settings.</p>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Profile Settings</h2>
                <button class="close-btn" onclick="closeModal('settings-modal')">&times;</button>
            </div>
            <div class="form-group">
                <label>Profile Picture</label>
                <input type="file" id="profile-picture" accept="image/*">
            </div>
            <div class="form-group">
                <label>Display Name</label>
                <input type="text" id="display-name" placeholder="Enter your display name">
            </div>
            <button class="btn" onclick="saveSettings()">Save Changes</button>
            <button class="btn btn-secondary" onclick="closeModal('settings-modal')" style="margin-top: 10px;">Cancel</button>
        </div>
    </div>

    <div id="create-post-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Post</h2>
                <button class="close-btn" onclick="closeModal('create-post-modal')">&times;</button>
            </div>
            <div class="form-group">
                <textarea id="post-content" placeholder="What's on your mind?" rows="4" style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;"></textarea>
            </div>
            <button class="btn" onclick="createPost()">Post</button>
            <button class="btn btn-secondary" onclick="closeModal('create-post-modal')" style="margin-top: 10px;">Cancel</button>
        </div>
    </div>

    <div id="about-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About G-X Platform</h2>
                <button class="close-btn" onclick="closeModal('about-modal')">&times;</button>
            </div>
            <div class="creator-info">
                <img src="https://i.ibb.co/yBBrh5LM/dave-photo.jpg" alt="Dave Gallioth" class="profile-avatar">
                <h3>Dave Gallioth</h3>
                <p>Platform Creator & Technology Enthusiast</p>
            </div>
            <div class="about-content">
                <h4>About the Creator:</h4>
                <p>G-X Platform was created by Dave Gallioth, a young Haitian developer born on June 20, 2007. Dave is passionate about technology and found inspiration to create this platform through his love for innovation and digital solutions.</p>
                
                <h4>Why this platform was created:</h4>
                <p>This platform was created with the objective of uniting people from around the world to share memories together. We believe that unity is beautiful and that unity is the key to everything.</p>
            </div>
            <button class="btn" onclick="closeModal('about-modal')">Close</button>
        </div>
    </div>

    <div id="contact-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Contact Us</h2>
                <button class="close-btn" onclick="closeModal('contact-modal')">&times;</button>
            </div>
            <div class="creator-info">
                <img src="https://i.ibb.co/yBBrh5LM/dave-photo.jpg" alt="Dave Gallioth" class="profile-avatar" style="width: 100px; height: 100px;">
                <h3>Dave Gallioth</h3>
                <p>Platform Creator</p>
            </div>
            <p><strong>Email:</strong> dave@belikebrit.org</p>
            <p><strong>Phone:</strong> (+509) 41362708</p>
            <p>Feel free to reach out to us for any questions or support!</p>
            <button class="btn" onclick="closeModal('contact-modal')">Close</button>
        </div>
    </div>

    <div id="forgot-password-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reset Your Password</h2>
                <button class="close-btn" onclick="closeModal('forgot-password-modal')">&times;</button>
            </div>
            
            <div id="forgot-password-error" class="error-message" style="display: none;"></div>
            <div id="forgot-password-success" class="success-message" style="display: none;"></div>
            
            <div class="form-group">
                <label for="forgot-email">Enter your email address</label>
                <input type="email" id="forgot-email" placeholder="Your email address">
                <p style="font-size: 14px; color: #6b7280; margin-top: 8px;">
                    We'll send you a link to reset your password
                </p>
            </div>

            <div class="loading-spinner" id="forgot-password-loading">
                <div class="spinner"></div>
                <p style="margin-top: 8px; color: #6b7280;">Sending reset link...</p>
            </div>
            
            <button class="btn" onclick="sendPasswordResetEmail()" id="reset-password-btn">Send Reset Link</button>
            <button class="btn btn-secondary" onclick="closeModal('forgot-password-modal')" style="margin-top: 10px;">Cancel</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDuLwJp9F-IRnPuKwmUgj_63W1E7034drM",
            authDomain: "g-x-4678a.firebaseapp.com",
            projectId: "g-x-4678a",
            storageBucket: "g-x-4678a.firebasestorage.app",
            messagingSenderId: "222697143577",
            appId: "1:222697143577:web:106c769400b01514a69988",
            measurementId: "G-01B2Y470HB"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentUser = null;
        let isLoginMode = true;

        // ✅ FONKSYON POU MONTRE AP PRINCIPAL LA
        function showMainApp() {
            document.getElementById('auth-app').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            loadUserData();
        }

        function showAuthApp() {
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('auth-app').style.display = 'block';
        }

        // Auth Functions
        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const authTitle = document.getElementById('auth-title');
            const toggleText = document.getElementById('auth-toggle-text');

            if (isLoginMode) {
                loginForm.style.display = 'block';
                signupForm.style.display = 'none';
                authTitle.textContent = 'Welcome to G-X';
                toggleText.innerHTML = 'Don\'t have an account? <a onclick="toggleAuthMode()">Sign up here</a>';
            } else {
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
                authTitle.textContent = 'Join G-X Platform';
                toggleText.innerHTML = 'Already have an account? <a onclick="toggleAuthMode()">Login here</a>';
            }
            
            document.getElementById('auth-error').style.display = 'none';
            document.getElementById('auth-success').style.display = 'none';
        }

        // Login form handler - ✅ AJOUTE REDIREKSYON
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorDiv = document.getElementById('auth-error');
            const successDiv = document.getElementById('auth-success');

            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    successDiv.textContent = 'Welcome back to G-X Platform!';
                    successDiv.style.display = 'block';
                    
                    // ✅ REDIREKSYON AN - 2 segond apre
                    setTimeout(() => {
                        showMainApp();
                    }, 2000);
                })
                .catch((error) => {
                    let errorMessage = 'Login error: ';
                    switch (error.code) {
                        case 'auth/invalid-email':
                            errorMessage += 'Invalid email address';
                            break;
                        case 'auth/user-disabled':
                            errorMessage += 'This account has been disabled';
                            break;
                        case 'auth/user-not-found':
                            errorMessage += 'No account found with this email';
                            break;
                        case 'auth/wrong-password':
                            errorMessage += 'Incorrect password';
                            break;
                        default:
                            errorMessage += error.message;
                    }
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                });
        });

        // Signup form handler - ✅ AJOUTE REDIREKSYON
        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('signup-firstname').value;
            const lastName = document.getElementById('signup-lastname').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            const errorDiv = document.getElementById('auth-error');
            const successDiv = document.getElementById('auth-success');

            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            if (!agreeTerms) {
                errorDiv.textContent = 'Please agree to the Terms and Conditions';
                errorDiv.style.display = 'block';
                return;
            }

            if (password !== confirmPassword) {
                errorDiv.textContent = 'Passwords do not match!';
                errorDiv.style.display = 'block';
                return;
            }

            if (password.length < 6) {
                errorDiv.textContent = 'Password should be at least 6 characters';
                errorDiv.style.display = 'block';
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    return db.collection('users').doc(userCredential.user.uid).set({
                        firstName: firstName,
                        lastName: lastName,
                        email: email,
                        followers: 0,
                        following: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        lastLogin: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    successDiv.textContent = 'Account created successfully! Welcome to G-X Platform!';
                    successDiv.style.display = 'block';
                    document.getElementById('signup-form').reset();
                    
                    // ✅ REDIREKSYON AN - 2 segond apre
                    setTimeout(() => {
                        showMainApp();
                    }, 2000);
                })
                .catch((error) => {
                    let errorMessage = 'Sign up error: ';
                    switch (error.code) {
                        case 'auth/email-already-in-use':
                            errorMessage += 'This email is already registered';
                            break;
                        case 'auth/invalid-email':
                            errorMessage += 'Invalid email address';
                            break;
                        case 'auth/operation-not-allowed':
                            errorMessage += 'Email/password accounts are not enabled';
                            break;
                        case 'auth/weak-password':
                            errorMessage += 'Password is too weak';
                            break;
                        default:
                            errorMessage += error.message;
                    }
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                });
        });

        // Forgot Password Functions
        function showForgotPassword() {
            document.getElementById('forgot-password-modal').style.display = 'flex';
            document.getElementById('forgot-password-error').style.display = 'none';
            document.getElementById('forgot-password-success').style.display = 'none';
            document.getElementById('forgot-email').value = '';
        }

        function sendPasswordResetEmail() {
            const email = document.getElementById('forgot-email').value;
            const errorDiv = document.getElementById('forgot-password-error');
            const successDiv = document.getElementById('forgot-password-success');
            const loadingDiv = document.getElementById('forgot-password-loading');
            const resetBtn = document.getElementById('reset-password-btn');

            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            if (!email) {
                errorDiv.textContent = 'Please enter your email address';
                errorDiv.style.display = 'block';
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                errorDiv.textContent = 'Please enter a valid email address';
                errorDiv.style.display = 'block';
                return;
            }

            loadingDiv.style.display = 'block';
            resetBtn.disabled = true;

            auth.sendPasswordResetEmail(email)
                .then(() => {
                    loadingDiv.style.display = 'none';
                    resetBtn.disabled = false;
                    successDiv.textContent = 'Password reset email sent! Check your inbox and spam folder.';
                    successDiv.style.display = 'block';
                    
                    document.getElementById('forgot-email').value = '';
                    
                    setTimeout(() => {
                        closeModal('forgot-password-modal');
                    }, 3000);
                })
                .catch((error) => {
                    loadingDiv.style.display = 'none';
                    resetBtn.disabled = false;
                    
                    let errorMessage = 'Error: ';
                    switch (error.code) {
                        case 'auth/invalid-email':
                            errorMessage += 'Invalid email address';
                            break;
                        case 'auth/user-not-found':
                            errorMessage += 'No account found with this email';
                            break;
                        case 'auth/too-many-requests':
                            errorMessage += 'Too many attempts. Please try again later';
                            break;
                        default:
                            errorMessage += 'Failed to send reset email. Please try again.';
                    }
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                });
        }

        // App Navigation
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active-section');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(sectionName + '-section').classList.add('active-section');
            event.target.classList.add('active');
        }

        function showSettings() {
            document.getElementById('settings-modal').style.display = 'flex';
        }

        function showCreatePost() {
            document.getElementById('create-post-modal').style.display = 'flex';
        }

        function showAbout() {
            document.getElementById('about-modal').style.display = 'flex';
        }

        function showContact() {
            document.getElementById('contact-modal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showNotification() {
            alert('You have new notifications!');
        }

        function showFindFriends() {
            alert('Find Friends feature is working!');
        }

        // User Functions
        function loadUserData() {
            if (currentUser) {
                document.getElementById('current-user-name').textContent = currentUser.email;
                document.getElementById('avatar-text').textContent = currentUser.email[0].toUpperCase();
            }
        }

        function saveSettings() {
            alert('Settings saved!');
            closeModal('settings-modal');
        }

        function createPost() {
            const content = document.getElementById('post-content').value;
            if (content) {
                alert('Post created: ' + content);
                closeModal('create-post-modal');
                document.getElementById('post-content').value = '';
            }
        }

        function sendMessage() {
            const message = document.getElementById('chat-input').value;
            if (message.trim()) {
                const chatMessages = document.getElementById('chat-messages');
                chatMessages.innerHTML += `
                    <div class="message sent">
                        ${message}
                    </div>
                `;
                document.getElementById('chat-input').value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        function logout() {
            auth.signOut();
            showAuthApp();
        }

        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                showMainApp();
                if (user.email === 'davemoline0@gmail.com') {
                    document.getElementById('admin-link').style.display = 'block';
                }
            } else {
                showAuthApp();
            }
        });

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        console.log('G-X Platform loaded successfully!');
    </script>
</body>
</html>
