<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-X Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --dark: #2d3748;
            --light: #f7fafc;
            --success: #48bb78;
            --warning: #ed8936;
            --danger: #f56565;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
        }

        /* Auth Styles */
        .auth-container {
            max-width: 500px;
            margin: 50px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .auth-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .form-container {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
            font-size: 14px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .date-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
        }

        .btn {
            padding: 12px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .auth-toggle {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }

        .auth-toggle a {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .auth-toggle a:hover {
            text-decoration: underline;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
            text-align: center;
            border: 1px solid #fcc;
            display: none;
        }

        .success-message {
            background: #efe;
            color: #363;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 14px;
            text-align: center;
            border: 1px solid #cfc;
            display: none;
        }

        .terms-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .terms-group input {
            width: auto;
        }

        /* Main App Styles */
        #main-app {
            display: none;
        }

        .navbar {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s;
            cursor: pointer;
            position: relative;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            color: white;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-stats {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .stat-item {
            background: var(--light);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .followers { color: var(--success); }

        .verification-badge {
            font-size: 16px;
            margin-left: 5px;
        }

        .gold-badge { color: var(--gold); }
        .silver-badge { color: var(--silver); }
        .blue-badge { color: var(--primary); }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }

        .post-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            position: relative;
        }

        .verification-badge-avatar {
            position: absolute;
            bottom: -2px;
            right: -2px;
            background: white;
            border-radius: 50%;
            padding: 2px;
        }

        .post-content {
            margin-bottom: 1rem;
        }

        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin: 1rem 0;
        }

        .post-actions {
            display: flex;
            gap: 1rem;
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .online-users {
            margin-bottom: 2rem;
        }

        .user-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background 0.3s;
            cursor: pointer;
        }

        .user-item:hover {
            background: var(--light);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .chat-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 1rem;
            height: 600px;
        }

        .chat-list {
            background: var(--light);
            border-radius: 10px;
            padding: 1rem;
            overflow-y: auto;
        }

        .chat-window {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .message {
            padding: 0.5rem;
            margin: 0.5rem 0;
            border-radius: 10px;
            max-width: 70%;
        }

        .message.sent {
            background: var(--primary);
            color: white;
            margin-left: auto;
        }

        .message.received {
            background: var(--light);
            color: var(--dark);
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
        }

        .chat-input input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 20px;
        }

        .welcome-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 2000;
            text-align: center;
            display: none;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1500;
            display: none;
        }

        /* Admin Styles */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .users-table {
            width: 100%;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .users-table th, .users-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .section {
            display: none;
        }

        .active-section {
            display: block;
        }

        .forgot-password {
            text-align: center;
            margin-top: 10px;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary);
            margin: 0 auto 1rem;
            display: block;
        }

        .creator-info {
            text-align: center;
            margin-bottom: 2rem;
        }

        .creator-info h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .about-content {
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .about-content h4 {
            color: var(--primary);
            margin: 1.5rem 0 0.5rem 0;
        }
    </style>
</head>
<body>
    <!-- Login/Signup Form -->
    <div id="auth-app" class="auth-container">
        <div class="auth-header">
            <h1 id="auth-title">Login to G-X Platform</h1>
            <p>Join our community</p>
        </div>
        
        <div class="form-container">
            <div id="auth-error" class="error-message"></div>
            <div id="auth-success" class="success-message"></div>
            
            <!-- Login Form -->
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email Address</label>
                    <input type="email" id="login-email" required placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required placeholder="Enter your password">
                </div>
                
                <button type="submit" class="btn">Login</button>
            </form>

            <!-- Signup Form -->
            <form id="signup-form" style="display: none;">
                <div class="form-group">
                    <label for="signup-firstname">First Name</label>
                    <input type="text" id="signup-firstname" required placeholder="Enter your first name">
                </div>

                <div class="form-group">
                    <label for="signup-lastname">Last Name</label>
                    <input type="text" id="signup-lastname" required placeholder="Enter your last name">
                </div>

                <div class="form-group">
                    <label for="signup-email">Email Address</label>
                    <input type="email" id="signup-email" required placeholder="Enter your email">
                </div>

                <div class="form-group">
                    <label>Date of Birth</label>
                    <div class="date-group">
                        <select id="birth-year" required>
                            <option value="">Year</option>
                            <!-- Years will be populated by JavaScript -->
                        </select>
                        <select id="birth-month" required>
                            <option value="">Month</option>
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <select id="birth-day" required>
                            <option value="">Day</option>
                            <!-- Days will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" required placeholder="Create a password">
                </div>

                <div class="form-group">
                    <label for="signup-confirm-password">Confirm Password</label>
                    <input type="password" id="signup-confirm-password" required placeholder="Confirm your password">
                </div>

                <div class="terms-group">
                    <input type="checkbox" id="agree-terms" required>
                    <label for="agree-terms">I agree to the Terms and Conditions</label>
                </div>
                
                <button type="submit" class="btn">Create Account</button>
            </form>

            <div class="forgot-password">
                <a onclick="showForgotPassword()">Forgot Password?</a>
            </div>
            
            <div class="auth-toggle">
                <span id="auth-toggle-text">Don't have an account? <a onclick="toggleAuthMode()">Sign up here</a></span>
            </div>

            <div class="auth-toggle">
                <a onclick="showAbout()">About G-X Platform</a>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">G-X Platform</div>
            <div class="nav-links">
                <a class="nav-link active" onclick="showSection('home')">Home</a>
                <a class="nav-link" onclick="showSection('chat')">
                    Chat
                    <span id="chat-badge" class="notification-badge" style="display: none;">0</span>
                </a>
                <a class="nav-link" onclick="showSection('messages')">
                    New Messages
                    <span id="message-badge" class="notification-badge" style="display: none;">0</span>
                </a>
                <a class="nav-link" onclick="showNotification()">Notifications</a>
                <a class="nav-link" onclick="showSettings()">Profile Settings</a>
                <a class="nav-link" onclick="showAbout()">About Us</a>
                <a class="nav-link" onclick="showContact()">Contact Us</a>
                <a class="nav-link" id="admin-link" style="display: none;" onclick="showSection('admin')">Admin</a>
                <a class="nav-link" onclick="logout()">Logout</a>
            </div>
            <div class="user-stats">
                <div class="stat-item followers">
                    Followers: <span id="user-followers">0</span>
                    <span id="verification-badge" class="verification-badge"></span>
                </div>
            </div>
        </nav>

        <div class="container">
            <main>
                <!-- Home Section -->
                <section id="home-section" class="section active-section">
                    <div class="post-card">
                        <div class="post-header">
                            <div class="user-avatar" id="current-user-avatar">
                                <span id="avatar-text">U</span>
                                <span id="avatar-badge" class="verification-badge-avatar"></span>
                            </div>
                            <div>
                                <h4 id="current-user-name">User</h4>
                                <small>Welcome to G-X Platform!</small>
                            </div>
                        </div>
                        <div class="post-content">
                            <p>Share your thoughts with the community...</p>
                        </div>
                    </div>

                    <div id="posts-container">
                        <!-- Posts will be loaded here -->
                    </div>
                </section>

                <!-- Chat Section -->
                <section id="chat-section" class="section">
                    <h2>Chat</h2>
                    <div class="chat-container">
                        <div class="chat-list" id="chat-list">
                            <!-- Chat list will be loaded here -->
                        </div>
                        <div class="chat-window" id="chat-window">
                            <div class="chat-messages" id="chat-messages">
                                <!-- Messages will appear here -->
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chat-input" placeholder="Type a message...">
                                <button class="btn" onclick="sendMessage()">Send</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Messages Section -->
                <section id="messages-section" class="section">
                    <h2>New Messages</h2>
                    <div id="new-messages-container">
                        <!-- New messages will appear here -->
                    </div>
                </section>

                <!-- Admin Section -->
                <section id="admin-section" class="section">
                    <h2>Admin Dashboard</h2>
                    
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h3>Total Users</h3>
                            <p id="total-users">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Today's Signups</h3>
                            <p id="today-signups">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Online Now</h3>
                            <p id="online-now">0</p>
                        </div>
                    </div>

                    <div class="users-table">
                        <h3>User Management</h3>
                        <table style="width: 100%;">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Followers</th>
                                    <th>Verification</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </main>

            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="online-users">
                    <h3>Online Friends</h3>
                    <div id="online-users-list">
                        <!-- Online users will appear here -->
                    </div>
                </div>

                <button class="btn" onclick="showCreatePost()" style="width: 100%; margin-bottom: 1rem;">Create Post</button>
                <button class="btn" onclick="showFindFriends()" style="width: 100%;">Find Friends</button>
            </aside>
        </div>
    </div>

    <!-- Modals -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>Profile Settings</h2>
            <div class="form-group">
                <label>Profile Picture</label>
                <input type="file" id="profile-picture" accept="image/*">
            </div>
            <div class="form-group">
                <label>Display Name</label>
                <input type="text" id="display-name" placeholder="Enter your display name">
            </div>
            <div class="form-group">
                <label>Bio</label>
                <textarea id="user-bio" placeholder="Tell us about yourself" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>Change Password</label>
                <input type="password" id="new-password" placeholder="New password">
            </div>
            <button class="btn" onclick="saveSettings()">Save Changes</button>
            <button class="btn" onclick="closeModal('settings-modal')" style="background: #666; margin-left: 0.5rem;">Cancel</button>
        </div>
    </div>

    <div id="create-post-modal" class="modal">
        <div class="modal-content">
            <h2>Create Post</h2>
            <div class="form-group">
                <textarea id="post-content" placeholder="What's on your mind?" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label>Upload Image/Video/Document</label>
                <input type="file" id="post-media" accept="image/*,video/*,.pdf,.doc,.docx">
            </div>
            <button class="btn" onclick="createPost()">Post</button>
            <button class="btn" onclick="closeModal('create-post-modal')" style="background: #666; margin-left: 0.5rem;">Cancel</button>
        </div>
    </div>

    <div id="about-modal" class="modal">
        <div class="modal-content">
            <h2>About G-X Platform</h2>
            
            <div class="creator-info">
                <img src="https://i.ibb.co/yBBrh5LM/dave-photo.jpg" alt="Dave Gallioth" class="profile-avatar">
                <h3>Dave Gallioth</h3>
                <p>Platform Creator & Technology Enthusiast</p>
            </div>

            <div class="about-content">
                <h4>About the Creator:</h4>
                <p>G-X Platform was created by Dave Gallioth, a young Haitian developer born on June 20, 2007. Dave is passionate about technology and found inspiration to create this platform through his love for innovation and digital solutions. His journey in technology started at a young age, and he continues to explore new ways to connect people through digital platforms.</p>
                
                <h4>Why this platform was created:</h4>
                <p>This platform was created with the objective of uniting people from around the world to share memories together. We believe that unity is beautiful and that unity is the key to everything. When you come to this site, you come to relax, share jokes, connect with friends, and build meaningful relationships - but always with respect for one another.</p>
                
                <h4>Our Mission:</h4>
                <p>To create a safe, inclusive space where people can freely express themselves, share their stories, and build connections that transcend geographical boundaries. We believe that technology should bring people together, and that's exactly what G-X Platform aims to achieve.</p>
            </div>
            
            <button class="btn" onclick="closeModal('about-modal')">Close</button>
        </div>
    </div>

    <div id="contact-modal" class="modal">
        <div class="modal-content">
            <h2>Contact Us</h2>
            <div class="creator-info">
                <img src="https://i.ibb.co/yBBrh5LM/dave-photo.jpg" alt="Dave Gallioth" class="profile-avatar" style="width: 100px; height: 100px;">
                <h3>Dave Gallioth</h3>
                <p>Platform Creator</p>
            </div>
            <p><strong>Email:</strong> dave@belikebrit.org</p>
            <p><strong>Phone:</strong> (+509) 41362708</p>
            <p>Feel free to reach out to us for any questions, suggestions, or support needs. We're here to help and always happy to hear from our community members!</p>
            <button class="btn" onclick="closeModal('contact-modal')">Close</button>
        </div>
    </div>

    <div id="forgot-password-modal" class="modal">
        <div class="modal-content">
            <h2>Reset Password</h2>
            <div class="form-group">
                <label>Enter your email</label>
                <input type="email" id="reset-email" placeholder="Your email address">
            </div>
            <button class="btn" onclick="resetPassword()">Send Reset Link</button>
            <button class="btn" onclick="closeModal('forgot-password-modal')" style="background: #666; margin-top: 10px;">Cancel</button>
        </div>
    </div>

    <!-- Welcome Message -->
    <div id="welcome-message" class="welcome-message">
        <h2 id="welcome-title">Welcome to G-X Platform!</h2>
        <p id="welcome-text">We're excited to have you here.</p>
        <button class="btn" onclick="closeWelcome()">Get Started</button>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <p>New comment on your post!</p>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDuLwJp9F-IRnPuKwmUgj_63W1E7034drM",
            authDomain: "g-x-4678a.firebaseapp.com",
            projectId: "g-x-4678a",
            storageBucket: "g-x-4678a.firebasestorage.app",
            messagingSenderId: "222697143577",
            appId: "1:222697143577:web:106c769400b01514a69988",
            measurementId: "G-01B2Y470HB"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        let currentUser = null;
        let isLoginMode = true;

        // Initialize date selects
        function initializeDateSelects() {
            const yearSelect = document.getElementById('birth-year');
            const daySelect = document.getElementById('birth-day');
            
            // Populate years (1900-current year)
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1900; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }
            
            // Populate days
            for (let day = 1; day <= 31; day++) {
                const option = document.createElement('option');
                option.value = day < 10 ? '0' + day : day;
                option.textContent = day;
                daySelect.appendChild(option);
            }
        }

        // Auth Functions
        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            const authTitle = document.getElementById('auth-title');
            const toggleText = document.getElementById('auth-toggle-text');

            if (isLoginMode) {
                loginForm.style.display = 'block';
                signupForm.style.display = 'none';
                authTitle.textContent = 'Login to G-X Platform';
                toggleText.innerHTML = 'Don\'t have an account? <a onclick="toggleAuthMode()">Sign up here</a>';
            } else {
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
                authTitle.textContent = 'Create Account';
                toggleText.innerHTML = 'Already have an account? <a onclick="toggleAuthMode()">Login here</a>';
            }
            
            document.getElementById('auth-error').style.display = 'none';
            document.getElementById('auth-success').style.display = 'none';
        }

        // Login form handler
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorDiv = document.getElementById('auth-error');
            const successDiv = document.getElementById('auth-success');

            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    successDiv.textContent = 'Welcome back to G-X Platform!';
                    successDiv.style.display = 'block';
                })
                .catch((error) => {
                    errorDiv.textContent = 'Login error: ' + error.message;
                    errorDiv.style.display = 'block';
                });
        });

        // Signup form handler
        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('signup-firstname').value;
            const lastName = document.getElementById('signup-lastname').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            const birthYear = document.getElementById('birth-year').value;
            const birthMonth = document.getElementById('birth-month').value;
            const birthDay = document.getElementById('birth-day').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            const errorDiv = document.getElementById('auth-error');
            const successDiv = document.getElementById('auth-success');

            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            if (!agreeTerms) {
                errorDiv.textContent = 'Please agree to the Terms and Conditions';
                errorDiv.style.display = 'block';
                return;
            }

            if (password !== confirmPassword) {
                errorDiv.textContent = 'Passwords do not match!';
                errorDiv.style.display = 'block';
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    return db.collection('users').doc(userCredential.user.uid).set({
                        firstName: firstName,
                        lastName: lastName,
                        email: email,
                        dateOfBirth: `${birthYear}-${birthMonth}-${birthDay}`,
                        followers: 0,
                        following: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        lastLogin: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    successDiv.textContent = 'Account created successfully! Welcome to G-X Platform!';
                    successDiv.style.display = 'block';
                    document.getElementById('signup-form').reset();
                    
                    // Send welcome message from admin
                    setTimeout(() => {
                        sendAdminWelcomeMessage();
                    }, 1000);
                })
                .catch((error) => {
                    errorDiv.textContent = 'Sign up error: ' + error.message;
                    errorDiv.style.display = 'block';
                });
        });

        function sendAdminWelcomeMessage() {
            // This would send a welcome message from admin to new user
            console.log('Sending welcome message to new user');
        }

        function showForgotPassword() {
            document.getElementById('forgot-password-modal').style.display = 'flex';
        }

        function resetPassword() {
            const email = document.getElementById('reset-email').value;
            if (!email) {
                alert('Please enter your email address');
                return;
            }

            auth.sendPasswordResetEmail(email)
                .then(() => {
                    alert('Password reset email sent! Check your inbox.');
                    closeModal('forgot-password-modal');
                })
                .catch((error) => {
                    alert('Error: ' + error.message);
                });
        }

        function showAbout() {
            document.getElementById('about-modal').style.display = 'flex';
        }

        function showContact() {
            document.getElementById('contact-modal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // App Navigation
        function showSection(sectionName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active-section');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(sectionName + '-section').classList.add('active-section');
            event.target.classList.add('active');
        }

        function showMainApp() {
            document.getElementById('auth-app').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            loadUserData();
            loadOnlineUsers();
        }

        function showAuthApp() {
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('auth-app').style.display = 'block';
        }

        function showSettings() {
            document.getElementById('settings-modal').style.display = 'flex';
        }

        function showCreatePost() {
            document.getElementById('create-post-modal').style.display = 'flex';
        }

        function closeWelcome() {
            document.getElementById('welcome-message').style.display = 'none';
        }

        function showNotification() {
            const notification = document.getElementById('notification');
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // User Functions
        function loadUserData() {
            if (currentUser) {
                db.collection('users').doc(currentUser.uid).get().then(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById('user-followers').textContent = data.followers || 0;
                        document.getElementById('current-user-name').textContent = `${data.firstName} ${data.lastName}`;
                        document.getElementById('avatar-text').textContent = (data.firstName[0] + data.lastName[0]).toUpperCase();
                        
                        // Update verification badge
                        updateVerificationBadge(data.followers);
                    }
                });
            }
        }

        function updateVerificationBadge(followers) {
            const badge = document.getElementById('verification-badge');
            const avatarBadge = document.getElementById('avatar-badge');
            
            badge.innerHTML = '';
            avatarBadge.innerHTML = '';
            
            if (followers >= 6000) {
                badge.innerHTML = '✓';
                badge.className = 'verification-badge blue-badge';
                avatarBadge.innerHTML = '✓';
                avatarBadge.style.color = 'var(--primary)';
            } else if (followers >= 4000) {
                badge.innerHTML = '✓';
                badge.className = 'verification-badge silver-badge';
                avatarBadge.innerHTML = '✓';
                avatarBadge.style.color = 'var(--silver)';
            } else if (followers >= 2000) {
                badge.innerHTML = '✓';
                badge.className = 'verification-badge gold-badge';
                avatarBadge.innerHTML = '✓';
                avatarBadge.style.color = 'var(--gold)';
            }
        }

        function saveSettings() {
            const file = document.getElementById('profile-picture').files[0];
            const displayName = document.getElementById('display-name').value;
            const bio = document.getElementById('user-bio').value;
            const newPassword = document.getElementById('new-password').value;

            const updates = {};
            if (displayName) updates.displayName = displayName;
            if (bio) updates.bio = bio;

            if (Object.keys(updates).length > 0) {
                db.collection('users').doc(currentUser.uid).update(updates)
                    .then(() => {
                        loadUserData();
                        alert('Profile updated successfully!');
                    });
            }

            if (file) {
                const storageRef = storage.ref('profile-pictures/' + currentUser.uid);
                storageRef.put(file).then(() => {
                    alert('Profile picture updated!');
                });
            }

            if (newPassword) {
                currentUser.updatePassword(newPassword).then(() => {
                    alert('Password updated!');
                });
            }

            closeModal('settings-modal');
        }

        function createPost() {
            const content = document.getElementById('post-content').value;
            const file = document.getElementById('post-media').files[0];

            if (content || file) {
                const postData = {
                    content: content,
                    author: currentUser.uid,
                    authorName: `${currentUser.firstName} ${currentUser.lastName}`,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    likes: 0,
                    comments: []
                };

                if (file) {
                    const storageRef = storage.ref('posts/' + Date.now() + '_' + file.name);
                    storageRef.put(file).then(snapshot => {
                        snapshot.ref.getDownloadURL().then(url => {
                            postData.mediaUrl = url;
                            postData.mediaType = file.type;
                            savePostToFirestore(postData);
                        });
                    });
                } else {
                    savePostToFirestore(postData);
                }
            }

            closeModal('create-post-modal');
            document.getElementById('post-content').value = '';
            document.getElementById('post-media').value = '';
        }

        function savePostToFirestore(postData) {
            db.collection('posts').add(postData).then(() => {
                alert('Post created successfully!');
                showNotification();
            });
        }

        // Admin Functions
        function loadAdminData() {
            if (currentUser && currentUser.email === 'davemoline0@gmail.com') {
                db.collection('users').get().then(snapshot => {
                    document.getElementById('total-users').textContent = snapshot.size;
                    document.getElementById('users-table-body').innerHTML = '';
                    
                    snapshot.forEach(doc => {
                        const user = doc.data();
                        const row = `
                            <tr>
                                <td>${user.firstName} ${user.lastName}</td>
                                <td>${user.email}</td>
                                <td>
                                    <input type="number" value="${user.followers || 0}" 
                                           onchange="updateUserFollowers('${doc.id}', this.value)" 
                                           style="width: 80px; padding: 5px;">
                                </td>
                                <td>${getVerificationLevel(user.followers || 0)}</td>
                                <td>
                                    <button onclick="deleteUser('${doc.id}')" style="background: var(--danger); color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Delete</button>
                                </td>
                            </tr>
                        `;
                        document.getElementById('users-table-body').innerHTML += row;
                    });
                });
            }
        }

        function getVerificationLevel(followers) {
            if (followers >= 6000) return 'Blue Verified';
            if (followers >= 4000) return 'Silver Verified';
            if (followers >= 2000) return 'Gold Verified';
            return 'Not Verified';
        }

        function updateUserFollowers(userId, followers) {
            db.collection('users').doc(userId).update({
                followers: parseInt(followers)
            }).then(() => {
                if (userId === currentUser.uid) {
                    loadUserData();
                }
            });
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                db.collection('users').doc(userId).delete();
                loadAdminData();
            }
        }

        function loadOnlineUsers() {
            // Simulate online users
            const onlineUsers = [
                { name: 'John Doe', initial: 'JD' },
                { name: 'Jane Smith', initial: 'JS' },
                { name: 'Mike Johnson', initial: 'MJ' }
            ];
            
            const onlineList = document.getElementById('online-users-list');
            onlineList.innerHTML = '';
            
            onlineUsers.forEach(user => {
                onlineList.innerHTML += `
                    <div class="user-item">
                        <div class="user-avatar" style="background: var(--success);">${user.initial}</div>
                        <span>${user.name}</span>
                    </div>
                `;
            });
        }

        function showFindFriends() {
            alert('Find Friends feature coming soon!');
        }

        function sendMessage() {
            const message = document.getElementById('chat-input').value;
            if (message.trim()) {
                // Simulate sending message
                const chatMessages = document.getElementById('chat-messages');
                chatMessages.innerHTML += `
                    <div class="message sent">
                        ${message}
                    </div>
                `;
                document.getElementById('chat-input').value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        function logout() {
            auth.signOut();
        }

        // Check if user is already logged in
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                showMainApp();
                if (user.email === 'davemoline0@gmail.com') {
                    document.getElementById('admin-link').style.display = 'block';
                }
                
                // Update user last login
                db.collection('users').doc(user.uid).update({
                    lastLogin: firebase.firestore.FieldValue.serverTimestamp()
                });
            } else {
                showAuthApp();
            }
        });

        // Initialize the app
        window.onload = function() {
            initializeDateSelects();
        };
    </script>
</body>
</html>
